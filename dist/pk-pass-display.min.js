!function(e){e.module("pk-pass-display",[])}(window.angular),function(e,a){function l(e){function l(e){e.hasOwnProperty("passId")&&void 0!=o.passId&&t(o.passId),e.hasOwnProperty("language")&&void 0!=o.language&&p(o.language)}function t(a){if("string"==typeof a&&""!=a){f=!1;var l="https://api-pass.passkit.net/";"string"==typeof o.apiRoot&&""!=o.apiRoot&&(l=o.apiRoot),e({method:"GET",url:l+"v2/passes/"+a+"/json"}).then(function(e){f=!0;var a=e.data;g=a,a.hasOwnProperty("appleWallet")&&(o.display.wallet="appleWallet",o.display.type=a.appleWallet.passType,o.passData=a.appleWallet.data,o.images=JSON.parse(JSON.stringify(g[o.display.wallet].images)),a.appleWallet.data[a.appleWallet.passType].hasOwnProperty("transitType")&&i(a.appleWallet.data[a.appleWallet.passType].transitType),p("string"==typeof o.language&&""!=o.language?o.language:g[o.display.wallet].defaultLang),o.selectedLanguage.hasOwnProperty("images")?o.eventIsStripFormat=o.images.hasOwnProperty("strip")||o.selectedLanguage.images.hasOwnProperty("strip"):o.eventIsStripFormat=o.images.hasOwnProperty("strip"),(o.passData.voided||o.passData.hasOwnProperty("expirationDate")&&new Date>new Date(o.passData.expirationDate))&&(o.passIsExpired=!0)),o.onLoaded({pass:a})},function(e){o.onError({err:"Error: "+e.status+" - "+JSON.stringify(e.data)})})}}function s(){o.flip=!o.flip}function i(e){var a={PKTransitTypeAir:"fa-plane",PKTransitTypeBoat:"fa-ship",PKTransitTypeBus:"fa-bus",PKTransitTypeGeneric:"fa-arrow-right",PKTransitTypeTrain:"fa-train"};o.transitType=a[e]}function r(e,a){var l={PKBarcodeFormatQR:"qrcode",PKBarcodeFormatPDF417:"pdf417",PKBarcodeFormatAztec:"aztec",PKBarcodeFormatCode128:"code128"},t={};if(e.length>1){for(var s=0;s<e.length;s++)"PKBarcodeFormatCode128"==e[s].format&&(t=e[s]);t.hasOwnProperty("format")||(t=e[0])}else t=e[0];var i=t.altText,r=t.message;null!=i&&(i=d(i,a)),null!=r&&(r=d(r,a)),o.barcode={message:r,format:l[t.format],altText:i}}function p(e){f&&(void 0!==e&&"string"==typeof o.language&&""!=e||(e=g[o.display.wallet].defaultLang),a.locale(e),o.fields=JSON.parse(JSON.stringify(g[o.display.wallet].data[g[o.display.wallet].passType])),n(o.fields),g[o.display.wallet].locales.hasOwnProperty(e)?(o.selectedLanguage=JSON.parse(JSON.stringify(g[o.display.wallet].locales[e])),o.passData.hasOwnProperty("logoText")&&(o.passData.logoText=d(JSON.parse(JSON.stringify(g[o.display.wallet].data.logoText)),o.selectedLanguage))):o.selectedLanguage={},"appleWallet"==o.display.wallet&&g.appleWallet.data.hasOwnProperty("barcodes")?r(JSON.parse(JSON.stringify(g.appleWallet.data.barcodes)),o.selectedLanguage):o.noAppleBarcode=!0)}function d(e,a){if(null!=a&&a.hasOwnProperty("text"))for(var l in a.text)a.text.hasOwnProperty(l)&&e==l&&(e=a.text[l]);return e}function n(e){o.mergedAuxSecFields=[],(e.hasOwnProperty("auxiliaryFields")||e.hasOwnProperty("secondaryFields"))&&(e.hasOwnProperty("auxiliaryFields")&&e.hasOwnProperty("secondaryFields")?o.mergedAuxSecFields=e.secondaryFields.concat(e.auxiliaryFields):e.hasOwnProperty("auxiliaryFields")?o.mergedAuxSecFields=e.auxiliaryFields:o.mergedAuxSecFields=e.secondaryFields)}function c(){return o.hasOwnProperty("barcode")&&o.barcode.hasOwnProperty("format")&&("qrcode"==o.barcode.format||"aztec"==o.barcode.format)}var o=this;o.$onChanges=l;var g,f=!1;o.passIsExpired=!1,o.eventIsStripFormat=!1,o.noAppleBarcode=!1,o.flip=!1,o.transitType="",o.mergedAuxSecFields=[],o.display={},o.selectedLanguage={},o.passData={},o.images={},o.barcode={},o.fields={},o.flipPass=s,o.barcodeIsSquare=c,o.queryEncode=encodeURIComponent}e.module("pk-pass-display").component("pkApplePass",{controller:["$http",l],template:'<style type="text/css">\n    #appleDisplay.pass .content .pass-value {color: {{$ctrl.passData.foregroundColor}} }\n    #appleDisplay.pass .content .pass-value:after {content: \'\'; color: {{$ctrl.passData.foregroundColor}} }\n    #appleDisplay.pass .content .pass-label {color: {{$ctrl.passData.labelColor}} }\n    #appleDisplay.pass .content {background-color: {{$ctrl.passData.backgroundColor}} }\n    #appleDisplay .boardingIcon path {fill: {{$ctrl.passData.labelColor}} }\n    #appleDisplay .primary-strip-img.show-img {background-image: url({{ $ctrl.images.strip || $ctrl.selectedLanguage.images.strip }}) }\n\n    #appleDisplay.pass-eventTicket .content:before{background: {{ $ctrl.bgColor || "#fff"}};}\n    .content:before, .content:after {background: linear-gradient(-45deg, transparent 10px, {{ $ctrl.bgColor || "#fff"}} 0), linear-gradient(45deg, transparent 10px, {{ $ctrl.bgColor || "#fff"}} 0);}\n    #appleDisplay.pass-boardingPass .pass-header {position: relative;}\n    #appleDisplay.pass-boardingPass .pass-header:before, #appleDisplay.pass-boardingPass .pass-header:after{\n        content: " ";\n        background-color: {{ $ctrl.bgColor || "#fff"}};\n        height: 10px;\n        width: 10px;\n        position: absolute;\n        bottom: -10px;\n        border-radius: 100%;\n    }\n    #appleDisplay.pass-boardingPass .pass-header:before{left: -15px;right: auto;}\n    #appleDisplay.pass-boardingPass .pass-header:after{left: auto;right: -15px;}\n</style><style type="text/css" ng-if="$ctrl.display.type == \'eventTicket\' &amp;&amp; !$ctrl.eventIsStripFormat">#appleDisplay.pass .content.show-img {background-image: url(\'{{ $ctrl.images.background || $ctrl.selectedLanguage.images.background }}\');background-size:cover; background-position:center;}</style><div id="appleDisplay" data-ng-class="{flipped: displayMode == \'back\'}" ng-if="$ctrl.display.wallet == \'appleWallet\'" class="pass pass-{{$ctrl.display.type}}"><div ng-class="{\'show-img\': $ctrl.display.type == \'eventTicket\' &amp;&amp; !$ctrl.eventIsStripFormat}" class="content"><div ng-class="{displayHide:$ctrl.flip}" class="flip-front"><div class="front"><div class="not-blurred"><div class="pass-header"><div class="row"><div class="col-xs-6 logo"><div class="image"><div class="image-wrapper"><img data-ng-src="{{ $ctrl.images.logo || $ctrl.selectedLanguage.images.logo }}"></div></div><div class="logoText pass-value">{{$ctrl.passData.logoText}}</div></div><div class="col-xs-6"><div class="row"><pk-apple-pass-field-group fields="$ctrl.fields.headerFields" data-type="header" lang="$ctrl.selectedLanguage" class="text-right"></pk-apple-pass-field-group></div></div></div></div><div data-ng-class="{\'show-img primary-strip-img normal\': $ctrl.display.type == \'coupon\' || $ctrl.display.type == \'storeCard\', \'show-img primary-strip-img event\': ($ctrl.display.type == \'eventTicket\' &amp;&amp; $ctrl.eventIsStripFormat)}"><div data-ng-if="$ctrl.display.type == \'boardingPass\'" class="primary row primary-boarding"><div class="col-xs-5"><pk-apple-pass-field field="$ctrl.fields.primaryFields[0]" lang="$ctrl.selectedLanguage" length="2"></pk-apple-pass-field></div><div class="col-xs-2 text-center pass-label"><i class="fa fa-3x fa-fw {{ $ctrl.transitType }}"></i></div><div class="col-xs-5 text-right"><pk-apple-pass-field field="$ctrl.fields.primaryFields[1]" lang="$ctrl.selectedLanguage" length="2"></pk-apple-pass-field></div></div><div data-ng-if="$ctrl.display.type == \'coupon\' || $ctrl.display.type == \'storeCard\'" class="primary row primary-strip"><pk-apple-pass-field field="$ctrl.fields.primaryFields[0]" lang="$ctrl.selectedLanguage" length="1"></pk-apple-pass-field></div><div data-ng-if="$ctrl.display.type == \'eventTicket\' &amp;&amp; $ctrl.eventIsStripFormat" class="primary row primary-strip"><pk-apple-pass-field field="$ctrl.fields.primaryFields[0]" lang="$ctrl.selectedLanguage" length="1"></pk-apple-pass-field></div><div data-ng-if="$ctrl.display.type == \'eventTicket\' &amp;&amp; !$ctrl.eventIsStripFormat" class="primary row"><div class="col-xs-9"><div class="primary row"><pk-apple-pass-field field="$ctrl.fields.primaryFields[0]" lang="$ctrl.selectedLanguage" length="1"></pk-apple-pass-field></div><div class="secondary row"><pk-apple-pass-field-group fields="$ctrl.fields.secondaryFields" lang="$ctrl.selectedLanguage"></pk-apple-pass-field-group></div></div><div class="col-xs-3"><img data-ng-src="{{ $ctrl.images.thumbnail || $ctrl.selectedLanguage.images.thumbnail }}"></div></div><div data-ng-if="$ctrl.display.type == \'generic\'" class="primary row"><div data-ng-if="$ctrl.images.thumbnail || $ctrl.selectedLanguage.images.thumbnail"><div class="col-xs-8"><pk-apple-pass-field field="$ctrl.fields.primaryFields[0]" lang="$ctrl.selectedLanguage" length="1"></pk-apple-pass-field></div><div class="col-xs-4"><img data-ng-src="{{ $ctrl.images.thumbnail || $ctrl.selectedLanguage.images.thumbnail }}"></div></div><div data-ng-if="!($ctrl.images.thumbnail || $ctrl.selectedLanguage.images.thumbnail)"><div class="col-xs-12"><pk-apple-pass-field field="$ctrl.fields.primaryFields[0]" lang="$ctrl.selectedLanguage" length="1"></pk-apple-pass-field></div></div></div></div><div class="extra-fields"><div data-ng-if="$ctrl.display.type == \'boardingPass\'"><div class="auxiliary row"><pk-apple-pass-field-group fields="$ctrl.fields.auxiliaryFields" lang="$ctrl.selectedLanguage"></pk-apple-pass-field-group></div><div class="secondary row"><pk-apple-pass-field-group fields="$ctrl.fields.secondaryFields" lang="$ctrl.selectedLanguage"></pk-apple-pass-field-group></div></div><div data-ng-if="$ctrl.display.type == \'coupon\' || $ctrl.display.type == \'storeCard\' || ($ctrl.display.type == \'generic\' &amp;&amp; $ctrl.barcodeIsSquare())"><div class="auxiliary secondary row"><pk-apple-pass-field-group fields="$ctrl.mergedAuxSecFields" lang="$ctrl.selectedLanguage"></pk-apple-pass-field-group></div></div><div data-ng-if="($ctrl.display.type == \'eventTicket\' &amp;&amp; $ctrl.eventIsStripFormat) || ($ctrl.display.type == \'generic\' &amp;&amp; !$ctrl.barcodeIsSquare())"><div class="secondary row"><pk-apple-pass-field-group fields="$ctrl.fields.secondaryFields" lang="$ctrl.selectedLanguage"></pk-apple-pass-field-group></div><div class="auxiliary row"><pk-apple-pass-field-group fields="$ctrl.fields.auxiliaryFields" lang="$ctrl.selectedLanguage"></pk-apple-pass-field-group></div></div><div data-ng-if="$ctrl.display.type == \'eventTicket\' &amp;&amp; !$ctrl.eventIsStripFormat"><div class="auxiliary secondary row"><pk-apple-pass-field-group fields="$ctrl.fields.auxiliaryFields" lang="$ctrl.selectedLanguage"></pk-apple-pass-field-group></div></div></div><div class="barcode-section barcodeRow text-center"><img class="footer" data-ng-src="{{ $ctrl.images.footer || $ctrl.selectedLanguage.images.footer }}"><div ng-class="{expired:$ctrl.passIsExpired}" data-ng-if="$ctrl.barcode"><div data-ng-if="!$ctrl.barcodeIsSquare()" class="row"><div class="col-xs-1"></div><div data-ng-if="!$ctrl.noAppleBarcode" class="col-xs-10 barcodeContainer"><img ng-src="https://bc.passkit.com/images/barcode.php?m={{$ctrl.queryEncode($ctrl.barcode.message)}}&amp;f={{$ctrl.barcode.format}}&e=UTF-8&x2=1" class="barcode rect"><div ng-show="!$ctrl.passIsExpired" class="text text-center">{{ $ctrl.barcode.altText }}</div><div ng-show="$ctrl.passIsExpired" class="text text-center text-muted">this pass has expired</div><div ng-if="!$ctrl.barcode.altText &amp;&amp; !$ctrl.passIsExpired" class="paddingInsteadOfAltText"></div></div><button ng-click="$ctrl.flipPass()" class="btn btn-default col-xs-1 info-button no-print">i</button></div><div data-ng-if="$ctrl.barcodeIsSquare()" class="row"><div class="col-xs-3"></div><div data-ng-if="!$ctrl.noAppleBarcode" class="col-xs-6 barcodeContainer"><img ng-src="https://bc.passkit.com/images/barcode.php?m={{$ctrl.queryEncode($ctrl.barcode.message)}}&amp;f={{$ctrl.barcode.format}}&e=UTF-8&x2=1" class="barcode square"><div ng-show="!$ctrl.passIsExpired" class="text text-center">{{ $ctrl.barcode.altText }}</div><div ng-show="$ctrl.passIsExpired" class="text text-center text-muted">this pass has expired</div><div ng-if="!$ctrl.barcode.altText &amp;&amp; !$ctrl.passIsExpired" class="paddingInsteadOfAltText"></div></div><div class="col-xs-3"></div><button ng-click="$ctrl.flipPass()" class="btn btn-default col-xs-1 info-button no-print">i</button></div></div><div data-ng-if="!$ctrl.barcode"><div class="row"><div class="col-xs-11"></div><button ng-click="$ctrl.flipPass()" class="btn btn-default col-xs-1 info-button no-print">i</button></div></div></div></div></div></div><div ng-class="{displayHide:!$ctrl.flip}" class="flip-back"><div class="back"><div class="row header"><button ng-click="$ctrl.flipPass()" translate class="btn btn-default col-xs-3 pull-right no-print">Done</button></div><div class="content-inner"><div data-ng-repeat="field in $ctrl.fields.backFields" class="back-field row"><pk-apple-pass-field field="field" lang="$ctrl.selectedLanguage" class="col-xs-12"></pk-apple-pass-field></div></div></div></div></div></div>',bindings:{passId:"@",language:"@",bgColor:"@",apiRoot:"@",onError:"&",onLoaded:"&"}})}(window.angular,window.moment),function(e,a){function l(e,l){function t(e){e.hasOwnProperty("field")&&void 0!=o.field&&i(o.field),e.hasOwnProperty("lang")&&void 0!=o.lang&&r(o.lang)}function s(e){return null!==e&&void 0!==e&&e.hasOwnProperty("key")&&(e.key.startsWith("s")||e.key.startsWith("a"))&&null!==o&&void 0!==o&&o.hasOwnProperty("length")&&1===o.length&&e.hasOwnProperty("value")&&e.value.length>32?{"font-size":"70%"}:null!==e&&void 0!==e&&e.hasOwnProperty("key")&&e.key.startsWith("p")&&null!==o&&void 0!==o&&o.hasOwnProperty("length")&&1===o.length&&e.hasOwnProperty("value")&&e.value.length>6?{"font-size":"42px"}:{}}function i(e){null!=e&&(e.hasOwnProperty("textAlignment")&&d(l,g[e.textAlignment]),e.hasOwnProperty("dateStyle")&&(o.field.value=c(e.value,f[e.dateStyle])),e.hasOwnProperty("currencyCode")&&(u[e.currencyCode]?o.field.value=u[e.currencyCode]+e.value:o.field.value=e.currencyCode+e.value),e.hasOwnProperty("numberStyle")&&(o.field.value=n(e.value,y[e.numberStyle])))}function r(e){if(null!=e&&e.hasOwnProperty("text"))for(var a in e.text)e.text.hasOwnProperty(a)&&void 0!==o.field&&(o.field.hasOwnProperty("value")&&o.field.value==a&&(o.field.value=e.text[a]),o.field.hasOwnProperty("label")&&o.field.label==a&&(o.field.label=e.text[a]),o.field.hasOwnProperty("attributedValue")&&o.field.attributedValue==a&&(o.field.attributedValue=e.text[a]))}function p(a){var l="";return null!=a&&(l=a.hasOwnProperty("attributedValue")?a.attributedValue:a.value),e.trustAsHtml(l.toString().replace(/\n/g,"<br>"))}function d(e,a){e.css("text-align",a)}function n(e,a){switch(a){case"percent":return e+"%";default:return e}}function c(e,l){var t;switch(l){case"full":t="LLLL";break;case"long":t="LL";break;case"medium":t="ll";break;case"short":t="l";break;default:return e}return a(e).format(t)}var o=this;o.$onChanges=t,o.getFontSize=s,o.getValue=p;var g={PKTextAlignmentLeft:"left",PKTextAlignmentCenter:"center",PKTextAlignmentRight:"right",PKTextAlignmentNatural:"justify"},f={PKDateStyleNone:"none",PKDateStyleShort:"short",PKDateStyleMedium:"medium",PKDateStyleLong:"long",PKDateStyleFull:"full"},u={AED:"د.إ.‏",AFN:"؋",ALL:"Lek",AMD:"դր.",ANG:!1,AOA:!1,ARS:"$",AUD:"$",AWG:!1,AZN:"man.",BAM:"KM",BBD:!1,BDT:"৳",BGN:"лв.",BHD:"د.ب.‏",BIF:!1,BMD:!1,BND:"$",BOB:"Bs",BOV:!1,BRL:"R$",BSD:!1,BTN:"Nu.",BWP:"P",BYR:"",BZD:"$",CAD:"$",CDF:!1,CHE:!1,CHF:"Fr.",CHW:!1,CLF:!1,CLP:"$",CNY:"￥",COP:"$",COU:!1,CRC:"₡",CUC:!1,CUP:!1,CVE:!1,CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"د.ج.‏",EGP:"ج.م.‏",ERN:"Nfk",ETB:!1,EUR:"€",FJD:!1,FKP:!1,GBP:"£",GEL:"",GHS:"GH₵",GIP:!1,GMD:!1,GNF:!1,GTQ:"Q",GYD:!1,HKD:"$",HNL:"L",HRK:"kn",HTG:!1,HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"रु.",IQD:"د.ع.‏",IRR:"﷼",ISK:"kr",JMD:"$",JOD:"د.أ.‏",JPY:"￥",KES:!1,KGS:"сом",KHR:"៛",KMF:!1,KPW:!1,KRW:"₩",KWD:"د.ك.‏",KYD:!1,KZT:!1,LAK:"₭",LBP:"ل.ل.‏",LKR:"SL Re",LRD:!1,LSL:!1,LTL:"Lt",LVL:"Ls",LYD:"د.ل.‏",MAD:"د.م.‏",MDL:"",MGA:!1,MKD:"",MMK:"K",MNT:"₮",MOP:"MOP$",MRO:!1,MUR:!1,MVR:"ރ.",MWK:"",MXN:"$",MXV:!1,MYR:"RM",MZN:!1,NAD:!1,NGN:!1,NIO:"C$",NOK:"kr",NPR:"नेरू",NZD:"$",OMR:"ر.ع.‏",PAB:"B/.",PEN:"S/.",PGK:!1,PHP:"₱",PKR:"روپے",PLN:"zł",PYG:!1,QAR:"ر.ق.‏",RON:"RON",RSD:"дин.",RUB:"руб.",RWF:"RF",SAR:"ر.س.‏",SBD:!1,SCR:!1,SDG:"",SEK:"kr",SGD:"$",SHP:!1,SLL:!1,SOS:!1,SRD:!1,SSP:!1,STD:!1,SYP:"ل.س.‏",SZL:!1,THB:"฿",TJS:"сом",TMT:!1,TND:"د.ت.‏",TOP:"T$",TRY:"TL",TTD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:!1,USD:"$",USN:!1,USS:!1,UYI:!1,UYU:"$",UZS:"сўм",VEF:"Bs.F.",VND:!1,VUV:!1,WST:!1,XAF:!1,XAG:!1,XAU:!1,XBA:!1,XBB:!1,XBC:!1,XBD:!1,XCD:!1,XDR:!1,XFU:!1,XOF:"CFA",XPD:!1,XPF:!1,XPT:!1,XTS:!1,XXX:!1,YER:"ر.ي.‏",ZAR:"R",ZMK:!1,ZWL:!1,EEK:"kr"},y={PKNumberStyleDecimal:"decimal",PKNumberStylePercent:"percent",PKNumberStyleScientific:"scientific",PKNumberStyleSpellOut:"spell"}}e.module("pk-pass-display").component("pkApplePassField",{controller:["$sce","$element",l],template:'<div class="field"><div class="field-wrapper"><label class="pass-label">{{$ctrl.field.label}}</label> <span class="pass-value" ng-style="$ctrl.getFontSize($ctrl.field)" data-ng-bind-html="$ctrl.getValue($ctrl.field)"></span></div></div>',bindings:{field:"<",lang:"<",length:"<?"}})}(window.angular,window.moment),function(e){function a(){function e(e){e.hasOwnProperty("fields")&&void 0!=a.fields&&null!=a.fields&&(a.width=Math.floor(100/a.fields.length)+"%")}var a=this;a.$onChanges=e,a.width="100%"}e.module("pk-pass-display").component("pkApplePassFieldGroup",{controller:[a],template:'<div class="row field-group" ng-if="$ctrl.type == \'header\'" data-ng-repeat="field in $ctrl.fields.slice().reverse() track by $index" data-ng-style="{width: $ctrl.width}"><pk-apple-pass-field field="field" lang="$ctrl.lang" length="$ctrl.fields.length"></pk-apple-pass-field></div><div class="row field-group" ng-if="$ctrl.type != \'header\'" data-ng-repeat="field in $ctrl.fields track by $index" data-ng-style="{width: $ctrl.width}"><pk-apple-pass-field field="field" lang="$ctrl.lang" length="$ctrl.fields.length"></pk-apple-pass-field></div>',bindings:{fields:"<",lang:"<",type:"@"}})}(window.angular);